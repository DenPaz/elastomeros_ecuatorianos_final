{% extends "account/_base.html" %}

{% load i18n %}
{% load widget_tweaks %}
{% load account %}

{% block title %}
  {% trans "Request Sign-In Code" %}
{% endblock title %}
{% block content_header %}
  <div class="vstack align-items-center gap-2 mb-6">
    <h1>
      {% trans "Send me a sign-in code" %}
    </h1>
    <p>
      {% blocktrans trimmed %}
        You will receive a special code for a password-free sign-in.
      {% endblocktrans %}
    </p>
  </div>
{% endblock content_header %}
{% block content_body %}
  {{ block.super }}
  {% url 'account_request_login_code' as request_login_code_url %}
  {% url 'account_login' as login_url %}
  {% trans "Email address" as email_label %}
  {% with WIDGET_ERROR_CLASS="border-danger" %}
    <form method="post"
          class="vstack gap-6"
          action="{{ request_login_code_url }}"
          novalidate>
      {% csrf_token %}
      {{ redirect_field }}
      <div class="vstack gap-1">
        <div class="position-relative">
          <i class="ai-mail fs-lg position-absolute top-50 start-0 translate-middle-y ms-4"></i>
          {% render_field form.email class="form-control form-control-lg ps-12" placeholder=email_label autocomplete="email" autofocus="autofocus" %}
        </div>
        {% if form.email.errors %}
          <div class="invalid-feedback d-block">
            <ul class="list-unstyled mb-0">
              {% for error in form.email.errors %}
                <li>
                  {{ error }}
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      </div>
      <button type="submit" class="btn btn-lg btn-primary">
        {% trans "Request code" %}
      </button>
      <a href="{{ login_url }}" class="btn btn-lg btn-secondary">
        {% trans "Other sign-in options" %}
      </a>
    </form>
  {% endwith %}
{% endblock content_body %}
